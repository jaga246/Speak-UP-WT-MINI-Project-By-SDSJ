<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SpeakUp Online Complaint System</title>
  <link rel="icon" href="emblem.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
  
    .modal-box {
      background: #fff;
      padding: 20px 30px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      text-align: center;
      max-width: 300px;
      animation: slideDown 0.3s ease;
    }
  
    .modal-box button {
      margin-top: 15px;
      padding: 8px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  
    @keyframes slideDown {
      from {
        transform: translateY(-20%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    .custom-navbar {
  background-color: #1d7eda; /* Light Sky Blue */
}
@keyframes switchColorUp {
  0%, 100% {
    color: white;
    -webkit-text-stroke: 1.5px #007BFF;
  }
  50% {
    color: black;
    -webkit-text-stroke: 1.5px #007BFF;
  }
}

@keyframes switchColorDown {
  0%, 100% {
    color: black;
    -webkit-text-stroke: 1.5px #007BFF;
  }
  50% {
    color: white;
    -webkit-text-stroke: 1.5px #007BFF;
  }
}

.color-switch-up, .color-switch-down {
  padding: 0 10px;
  border-radius: 5px;
  font-weight: bold;
  -webkit-text-stroke: 1px #007BFF; /* Permanent blue stroke */
  transition: all 0.3s ease;
}

.color-switch-up {
  animation: switchColorUp 3.5s infinite;
}

.color-switch-down {
  animation: switchColorDown 3.5s infinite;
}
.custom-button {
  display: inline-block;
  padding: 12px 28px;
  border: 2px solid #007BFF;
  border-radius: 50px;
  background-color: white;
  color: black;
  font-weight: 600;
  text-decoration: none;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  transition: all 0.4s ease;
}

.custom-button:hover {
  background-color: #007BFF;
  color: white;
  transform: scale(1.05);
}
  </style>  
</head>
<body>

  <!-- Top Header -->
  <div class="top-header">
    <div class="d-flex align-items-center">
      <img src="logo.jpeg" alt="Gov Logo">
      <div class="ml-3">
        <h3><b>Speak Up Online Complaint System</b></h3>
      </div>
    </div>
    <div class="minister-imgs d-flex align-items-center">
      <img src="govtlogo.jpeg" alt="Minister 1">
      <img src="Govt.jpeg" alt="Minister 2">
    </div>
  </div>

  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
    <div class="container">
      <a class="navbar-brand font-weight-bold" href="#">SpeakUp Portal</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a class="nav-link" href="#" onclick="showHome()">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showFAQ()">FAQs</a></li>
          <li class="nav-item"><a class="nav-link" href="howtouse.html">How to Use</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="checkUserProfile()">Profile</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">Login</a>
            <div class="dropdown-menu">
              <a class="dropdown-item text-dark" href="#"color-dark onclick = "loginToSpeakUp()">Login</a>
              <a class="dropdown-item text-dark" href="#" onclick="signupToSpeakup()">SignUp</a>
            </div>
          </li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showFeedback()">Feedback</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showAbout()">About</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="logout()">Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Section -->
  <section style="background-color: white; padding: 80px 20px; text-align: center;">
    <h1 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 3em; font-weight: bold;">
      <span style="color: rgb(0, 140, 255);">Speak </span>
      <span class="color-switch-up">UP</span>
      <span style="color: rgb(0, 140, 255);"> when you feel </span>
      <span class="color-switch-down">DOWN</span>
    </h1>
  
    <p style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 1.2em; color: #333; margin-top: 20px;">
      Transform your silence into strength.
    </p>
  
    <div style="margin-top: 40px;">
      <a href="#" onclick="registerComplaint()" 
      class="custom-button">
        Register Your Complaint
      </a>
    </div>
  </section>
  
  <!-- Main Content -->
  <div id="home">
  <div class="container middle-part">
    <div class="row justify-content-center">
        <div class="col-12 col-md-4" onclick="registerComplaint()">
            <div class="card" >
                <img src="muncipal.jpeg" class="image" alt="Municipal">
                <h1 style="font-size:larger;"><b>Public Safety</b></h1>
                <p>Ensuring community well-being.</p>
            </div>
        </div>
        <div class="col-12 col-md-4" onclick="registerComplaint()">
            <div class="card">
                <img src="publicsafety.jpeg" class="image" alt="Public Safety">
                <h1 style="font-size:larger;"><b>Municipal Services</b></h1>
                <p>Providing essential city services.</p>
            </div>
        </div>
        <div class="col-12 col-md-4" onclick="registerComplaint()">
            <div class="card">
                <img src="education.jpeg" class="image" alt="Education">
                <h1 style="font-size:larger;"><b>Education</b></h1>
                <p>Improving knowledge for all.</p>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-12 col-md-4" onclick="registerComplaint()">
            <div class="card">
                <img src="health.jpeg" class="image" alt="Health Care">
                <h1 style="font-size:larger;"><b> Health Care</b></h1>
                <p>Enhancing urban living.</p>
            </div>
        </div>
        <div class="col-12 col-md-4" onclick="registerComplaint()">
            <div class="card">
                <img src="environment.jpeg" class="image" alt="Environment">
                <h1 style="font-size:larger;"><b>Environment</b></h1>
                <p>Protecting our planet.</p>
            </div>
        </div>
        <div class="col-12 col-md-4" onclick="registerComplaint()">
            <div class="card">
                <img src="Transportation.jpeg" class="image" alt="Transportation">
                <h1 style="font-size:larger;"><b>Transportation</b></h1>
                <p>Efficient and sustainable travel.</p>
            </div>
        </div>
    </div>
</div>
</div>

<!--FAQS-->
<div class="container" id = "FAQSection">
    <h2 class="faq-header"><b>SpeakUp Portal – Frequently Asked Questions</b></h2>
    
    <div class="accordion" id="faqAccordion">
      <!-- FAQ Template Items -->
    </div>
  </div>

<!--Personal Details-->
<div id="personaldetails">

  <div class="form-wrapper">
    <h2>Please Fill Your Details</h2>
    <form id = "userForm" action="/submit-profile" method="POST">
      
      <div class="form-group">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required />
      </div>

      <div class="form-group">
        <label for="email">Email Address:</label>
        <input type="email" id="email" name="email" required />
      </div>

      <div class="form-group">
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" required />
      </div>

      <div class="form-group">
        <label for="area">Area / Locality:</label>
        <input type="text" id="area" name="area" required />
      </div>

      <div class="form-group">
        <label for="mandal">Mandal:</label>
        <input type="text" id="mandal" name="mandal" required />
      </div>

      <div class="form-group">
        <label>Gender:</label>
        <div class="gender-options">
          <label><input type="radio" name="gender" value="Male" required /> Male</label>
          <label><input type="radio" name="gender" value="Female" required /> Female</label>
          <label><input type="radio" name="gender" value="Other" required /> Other</label>
        </div>
      </div>

      <div class="form-group">
        <label for="education">Education Level:</label>
        <input type="text" id="education" name="education" />
      </div>

      

      <div class="form-group">
        <label for="state">State:</label>
        <select id="state" name="state" required>
          <option value="">-- Select State --</option>
          <option>Andhra Pradesh</option>
          <option>Telangana</option>
          <option>Karnataka</option>
          <option>Tamil Nadu</option>
          <option>Kerala</option>
          <option>Maharashtra</option>
          <option>Others</option>
        </select>
      </div>

      <div class="form-group">
        <label for="district">District:</label>
        <input type="text" id="district" name="district" required />
      </div>

      <div class="form-group">
        <label for="bio">Short Bio (Optional):</label>
        <textarea id="bio" name="bio" rows="3" placeholder="Tell us a bit about yourself..."></textarea>
      </div>

      <div class="form-actions">
        <button type="submit">Save Profile</button>
      </div>

    </form>
  </div>

</div>  
  <!--Feedback-->
<div class="container feedback-container" id = "feedback">
    <form id="feedback-form">
      <h2 class = "feedback-heading">Feedback</h2>

      <label for="firstName">Your Name</label>
      <div class="name-fields">
        <input type="text" id="firstName" placeholder="First" />
        <input type="text" id="lastName" placeholder="Last" />
      </div>

      <label for="email">Your Email</label>
      <input type="email" id="email" placeholder="example@mail.com" />

      <label>How happy are you with our service?</label>
      <div class="stars">
        <span class="star" data-value="1">&#9734;</span>
        <span class="star" data-value="2">&#9734;</span>
        <span class="star" data-value="3">&#9734;</span>
        <span class="star" data-value="4">&#9734;</span>
        <span class="star" data-value="5">&#9734;</span>
      </div>

      <label for="feedback">Tell us more about your experience with us</label>
      <textarea id="feedback" rows="4" placeholder="Your feedback here..."></textarea>

      <div class="checkbox">
        <input type="checkbox" id="testimonial" />
        <label for="testimonial">Use my feedback as testimonial</label>
      </div>

      <button type="submit">Submit</button>
    </form>
</div>
<div id="about">

  <div id="about-page">
    <header class="about-header">
      <h1>About SpeakUp Portal</h1>
      <p>Empowering citizens to speak up and solve community issues.</p>
      <p>Your voice matters.Your city listens.</p>
    </header>

    <section class="about-section mission">
      <h2>Our Mission</h2>
      <p>SpeakUp Portal is a platform where users can report public issues to the right government departments quickly and efficiently. Our goal is to create a transparent and responsive communication channel between citizens and authorities.</p>
    </section>

    <section class="about-section how-it-works">
      <h2>How It Works</h2>
      <ul>
        <li>1. Users sign up and log in to the portal.</li>
        <li>2. They submit complaints by selecting the relevant department.</li>
        <li>3. Authorities receive, respond, and resolve the issues.</li>
        <li>4. Users track complaint status from their dashboard.</li>
      </ul>
    </section>

    <section class="about-section team">
      <h2>Meet the Team</h2>
      <p>This project is developed by a passionate team of students aiming to improve civic engagement using technology.</p>
      <ul>
        <li><strong>Swathi</strong> </li>
        <li><strong>Divya Deepthi</strong></li>
        <li><strong>Siddanth</strong></li>
        <li><strong>Jagadeesh</strong></li>
      </ul>
    </section>

    <section class="about-section tech-stack">
      <h2>Technology Stack</h2>
      <ul>
        <li>Frontend: HTML, CSS, JavaScript,Bootstrap,jquery</li>
        <li>Backend: JavaScript</li>
        <li>Database: FireBase-firestore</li>
        <li>Authentication: Firebase Authentication</li>
        <li>Mail Transactions : EmailJs</li>
        <li>Version Control : Git,Github</li>
      </ul>
    </section>
  </div>

</div>
<div id="loginModal" class="modal-overlay">
  <div class="modal-box">
    <p>You must be logged in to submit the form.</p>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<div id="feedbackModal" class="modal-overlay">
  <div class="modal-box">
    <p>Thank You for Sharing Feedback</p>
    <button onclick="closeModalFeed()">OK</button>
  </div>
</div>

<div id="logoutModal" class="modal-overlay">
  <div class="modal-box">
    <p>Logged Out Succesfully</p>
    <button onclick="closeModallogout()">OK</button>
  </div>
</div>
  <!-- Footer -->
 <div>
      <footer class="footer" style="background-color: rgb(255, 255, 255);color:rgb(43, 133, 216);font-weight: 800;">
        <div class="footer-container">
          <p>SpeakUp Support Cell:speakup@gmail.com</p>
        </div>
        <p>© 2025 Government Services</p>
      </footer>
 </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let reportCards = document.getElementsByClassName("Report");
    function registerComplaint(){
       window.location.href = "report.html";
    }
    function statusComplaint(){
        window.location.href = "personal.html";
    }
    
    const faqsEl = document.querySelectorAll('.faq');

    faqsEl.forEach(faq => {
    faqsEl.querySelector('.faq-question').addEventListener('click', () => {
        faq.classList.toggle('open');
    });
    });
    const stars = document.querySelectorAll('.star');
let selectedRating = 0;

stars.forEach(star => {
star.addEventListener('click', () => {
selectedRating = star.getAttribute('data-value');
updateStars(selectedRating);
});
});

function updateStars(rating) {
    stars.forEach(star => {
if (parseInt(star.getAttribute('data-value')) <= rating) {
  star.classList.add('selected');
} else {
  star.classList.remove('selected');
}
});
}

//JavaScript to load FAQs 
    const faqs = [
      {
        question: "1. What is the SpeakUp Portal?",
        answer: "The SpeakUp Portal is an online platform designed to allow individuals to securely and anonymously report complaints, misconduct, or concerns related to an organization, workplace, or service."
      },
      {
        question: "2. Who can file a complaint on the portal?",
        answer: "Anyone who has experienced or witnessed an issue that needs to be reported — including employees, students, customers, or members of the public — can use the SpeakUp Portal."
      },
      {
        question: "3. Is my identity kept confidential?",
        answer: "Yes. You can choose to file a complaint anonymously. If you share your contact information, it will be kept strictly confidential and used only for follow-up purposes."
      },
      {
        question: "4. What types of complaints can be submitted?",
        answer: "You can report a wide range of issues including education, healthcare, municipal service,public safety  and customer service concerns."
      },
      {
        question: "5. How do I submit a complaint?",
        answer: "Go to the 'File a Complaint' section, fill out the form with required details, and submit it. You will receive a tracking ID (if not anonymous) for future reference."
      },
      {
        question: "6. What happens after I file a complaint?",
        answer: "Your complaint is reviewed by the appropriate authority. An investigation may be initiated and appropriate action will be taken based on findings."
      },
      {
        question: "7. Can I track the status of my complaint?",
        answer: "Yes, if you provided your contact information or received a tracking number, you can check the status in the 'Track Complaint' section."
      },
      
    ];

    const accordion = document.getElementById("faqAccordion");

    faqs.forEach((faq, index) => {
      const item = document.createElement("div");
      item.className = "accordion-item";
      item.innerHTML = `
        <h2 class="accordion-header" id="heading${index}">
          <button class="accordion-button ${index !== 0 ? 'collapsed' : ''}" type="button" data-bs-toggle="collapse"
            data-bs-target="#collapse${index}" aria-expanded="${index === 0 ? 'true' : 'false'}" aria-controls="collapse${index}">
            ${faq.question}
          </button>
        </h2>
        <div id="collapse${index}" class="accordion-collapse collapse ${index === 0 ? 'show' : ''}"
          aria-labelledby="heading${index}" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            ${faq.answer}
          </div>
        </div>
      `;
      accordion.appendChild(item);
    });
  
    function loginToSpeakUp(){
        window.location.href = "login.html";
    }
    function signupToSpeakup(){
        window.location.href = "signup.html";
    }
  </script>
  <!-- Bootstrap JS Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module">
  // Import necessary Firebase functions
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, addDoc , doc , setDoc , getDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
  import { getAuth, onAuthStateChanged,signOut } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  // Your Firebase config (you said it's configured, but ensure this is present)
  const firebaseConfig = {
    apiKey: "AIzaSyBAQdZ46Zab_zTZTkeTG97HpPzmIDqDuHE",
  authDomain: "speakupportal.firebaseapp.com",
  projectId: "speakupportal",
  storageBucket: "speakupportal.firebasestorage.app",
  messagingSenderId: "1017841133120",
  appId: "1:1017841133120:web:47380e98faad1c1e3021a5"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  async function logout(){
   signOut(auth);
   localStorage.setItem("isLoggedIn", "false");
   localStorage.setItem("isdataSave", "false");
   showlogoutModal()
}
window.logout = logout;
  
  const fromParam = new URLSearchParams(window.location.search).get("from");

onAuthStateChanged(auth, async (user) => {

  const isdataSaved = localStorage.getItem("isdataSaved");
  if(!isdataSaved || isdataSaved !== "true"){
    if (fromParam === "profile") {
    document.getElementById("home").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("FAQSection").style.display = "none";
    document.getElementById("about").style.display = "none";
    document.getElementById("personaldetails").style.display = "block";
    return;
  }
  const docRef = doc(db, "users", user.uid);
  const docSnap = await getDoc(docRef);

  if (docSnap.exists()) {
    window.location.href = "personal.html";
  } else {
    document.getElementById("home").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("FAQSection").style.display = "none";
    document.getElementById("about").style.display = "none";
    document.getElementById("personaldetails").style.display = "block";
  }
 }
});

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector("#userForm");

    form.addEventListener("submit", async function (event) {
      const isLoggedIn = localStorage.getItem("isLoggedIn");
      
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      

      if (!isLoggedIn || isLoggedIn !== "true") {
        event.preventDefault();
        showModal();
        return;
      }
      event.preventDefault();
      await saveToFirestore(data)
    });
  });
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector("#feedback-form");

    form.addEventListener("submit", async function (event) {
      const isLoggedIn = localStorage.getItem("isLoggedIn");
      
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      

      if (!isLoggedIn || isLoggedIn !== "true") {
        event.preventDefault();
        showModal();
        return;
      }
      event.preventDefault();
      const auth = getAuth(app);
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const uid = user.uid;

      try {
        await setDoc(doc(db, "feedbacks", uid), data);
        showFeedbackModal();
        form.reset();
      } catch (error) {
        console.error("Error sending feedback:", error);
      }
    } else {
      console.error("User not authenticated.");
    }
  });
    });
  });
  async function saveToFirestore(data) {
  const auth = getAuth(app);
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const uid = user.uid;

      try {
        await setDoc(doc(db, "users", uid), data);
        window.location.href = "personal.html"
        localStorage.setItem("isdataSaved", "true");
        document.getElementById("userForm").reset();
      } catch (error) {
        console.error("Error saving profile:", error);
        alert("Error saving profile. Try again.");
      }
    } else {
      console.error("User not authenticated.");
    }
  });
}
async function checkUserProfile() {
  const auth = getAuth(app);
  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "login.html?redirect=fromProfile";
      return;
    }

    const uid = user.uid;
    const docRef = doc(db, "users", uid);
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      window.location.href = "personal.html";
    } else {
      document.getElementById("home").style.display = "none";
      document.getElementById("feedback").style.display = "none";
    document.getElementById("FAQSection").style.display = "none";
    document.getElementById("about").style.display = "none";
     document.getElementById("personaldetails").style.display = "block";
    }
  });
}
window.checkUserProfile = checkUserProfile

  function showModal() {
    document.getElementById("loginModal").style.display = "flex";
  }

  function showlogoutModal() {
    document.getElementById("logoutModal").style.display = "flex";
  }
  function showFeedbackModal() {
    document.getElementById("feedbackModal").style.display = "flex";
  }
</script>
<script>
  function closeModal() {
    document.getElementById("loginModal").style.display = "none";
    window.location.href = "login.html";
  }
  function closeModallogout() {
    document.getElementById("logoutModal").style.display = "none";
    window.location.href = "index.html";
  }
  function closeModalFeed() {
    document.getElementById("feedbackModal").style.display = "none";
    window.location.href = "index.html";
  }
</script>
<script>
  function showFAQ() {
    document.getElementById("home").style.display = "none";
    document.getElementById("about").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("personaldetails").style.display = "none";
    document.getElementById("FAQSection").style.display = "block";
  }
  function showAbout() {
    document.getElementById("home").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("FAQSection").style.display = "none";
    document.getElementById("personaldetails").style.display = "none";
    document.getElementById("about").style.display = "block";
  }
  function showFeedback() {
    document.getElementById("home").style.display = "none";
    document.getElementById("FAQSection").style.display = "none";
    document.getElementById("about").style.display = "none"
    document.getElementById("personaldetails").style.display = "none";
    document.getElementById("feedback").style.display = "block";
  }
  function showHome() {
    document.getElementById("home").style.display = "block";
    document.getElementById("FAQSection").style.display = "none";
    document.getElementById("about").style.display = "none"
    document.getElementById("personaldetails").style.display = "none";
    document.getElementById("feedback").style.display = "none";
  }
</script>



</body>
</html>
